import { useMemo, useState } from "react";
import {
  Search,
  Sparkles,
  Clapperboard,
  Satellite,
  Film,
  MonitorPlay,
  ExternalLink,
  ChevronDown,
} from "lucide-react";

import { SOFTWARE_ITEMS } from "../../data/SoftwareData.jsx";
import { filterByCategoryAndQuery } from "../../utils/filters.js";

const TYPE_OPTIONS = [
  { value: "all", label: "Todos", icon: <Sparkles className="w-4 h-4" /> },
  {
    value: "online",
    label: "Online",
    icon: <Clapperboard className="w-4 h-4" />,
  },
  {
    value: "simulacion",
    label: "Simulacion",
    icon: <Satellite className="w-4 h-4" />,
  },
  
  {
    value: "juegos",
    label: "Juegos",
    icon: <MonitorPlay className="w-4 h-4" />,
  },
];

const TYPE_LABEL = TYPE_OPTIONS.reduce(
  (acc, opt) => ((acc[opt.value] = opt.label), acc),
  {}
);

const CATEGORY_DESCRIPTION = {
  all: "Explora documentales, canales oficiales, ficción y series que acercan el universo desde múltiples formatos.",
  online:
    "Producciones que narran misiones, telescopios y descubrimientos con rigor científico.",
  juegos:
    "Canales y archivos oficiales con contenido actualizado, transmisiones y material descargable.",
  simulacion:
    "Historias inspiradas en la astronomía que combinan ciencia, narrativa y visuales inmersivos.",
  
};

export function Software() {
  const [query, setQuery] = useState("");
  const [type, setType] = useState("all");

  const catalogue = useMemo(() => SOFTWARE_ITEMS, []);

  const filtered = useMemo(
    () =>
      filterByCategoryAndQuery(catalogue, type, query, {
        categorySelector: (item) => item?.category,
        fieldSelector: (item) => [
          item?.title,
          item?.provider,
          item?.desc,
        ],
      }),
    [catalogue, type, query]
  );

  const handleClearFilters = () => {
    setQuery("");
    setType("all");
  };

  return (
    <main className="min-h-[calc(100vh-6rem)] bg-base-200">
      <section className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 lg:py-14">
        {/* Header */}
        <header className="max-w-3xl mt-15">
